graph TD
    %% Main entry point
    Lib["Lib.hs"]
    
    %% Domain Layer (innermost)
    subgraph Domain["Domain Layer"]
        Todo["Domain/Repositories/Entities/Todo.hs"]
        TodoRepo["Domain/Repositories/TodoRepository.hs"]
    end
    
    %% Application Layer
    subgraph Application["Application Layer"]
        TodoUseCases["Application/UseCases/TodoUseCases.hs"]
    end
    
    %% Infrastructure Layer
    subgraph Infrastructure["Infrastructure Layer"]
        DatabaseRepo["Infrastructure/Repositories/DatabaseRepository.hs"]
        SQLiteTodoRepo["Infrastructure/Repositories/SQLiteTodoRepository.hs"]
        DatabaseOps["Infrastructure/Services/DatabaseOperations.hs"]
    end
    
    %% Presentation Layer (outermost)
    subgraph Presentation["Presentation Layer"]
        TodoAPI["Presentation/API/TodoAPI.hs"]
        Templates["Presentation/Web/Templates.hs"]
        WebAPI["Presentation/Web/WebAPI.hs"]
    end
    
    %% Dependencies (pointing inward according to Onion Architecture)
    TodoRepo --> Todo
    
    TodoUseCases --> TodoRepo
    TodoUseCases --> Todo
    
    SQLiteTodoRepo --> TodoRepo
    SQLiteTodoRepo --> Todo
    SQLiteTodoRepo --> DatabaseRepo
    SQLiteTodoRepo --> DatabaseOps
    
    DatabaseRepo --> DatabaseOps
    
    TodoAPI --> TodoUseCases
    TodoAPI --> Todo
    
    Templates --> Todo
    
    WebAPI --> TodoUseCases
    WebAPI --> Templates
    WebAPI --> Todo
    
    Lib --> TodoAPI
    Lib --> WebAPI
    Lib --> SQLiteTodoRepo
    Lib --> TodoUseCases